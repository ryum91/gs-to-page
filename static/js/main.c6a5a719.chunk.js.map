{"version":3,"sources":["GeneratePage.tsx","App.tsx","index.tsx"],"names":["GeneratePage","useState","id","setId","key","setKey","output","setOutput","handleClick","useCallback","inputId","inputKey","window","location","href","alert","e","className","value","onChange","target","placeholder","style","width","onClick","copy","params","URLSearchParams","search","get","colorSets","App","title","setTitle","headers","setHeaders","dataRows","setDataRows","filters","setFilters","init","a","docs","GoogleSpreadsheet","useApiKey","loadInfo","document","sheet","sheetsByIndex","getRows","rows","headerValues","map","row","result","forEach","header","useLayoutEffect","catch","origin","pathname","filteredHeaders","useMemo","filter","headerColors","reduce","prev","index","appendFilter","some","Object","entries","targetKey","targetValue","removeFilter","filteredDataRow","length","dataRow","every","filterKey","filterValue","wrap","closable","color","onClose","align","data","name","size","actions","PlayCircleOutlined","link","CopyOutlined","keys","undefined","categoryKey","cursor","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.c6a5a719.chunk.js","sourcesContent":["import { Input, Button } from 'antd';\nimport copy from 'copy-to-clipboard';\nimport { useCallback, useState } from 'react';\n\nexport const GeneratePage = () => {\n  const [id, setId] = useState<string>('');\n  const [key, setKey] = useState<string>('');\n\n  const [output, setOutput] = useState<string>('');\n\n  const handleClick = useCallback((inputId: string, inputKey: string) => {\n    try {\n      setOutput(\n        `${window.location.href}?id=${inputId}${inputKey && `&key=${inputKey}`}`\n      );\n      window.alert('생성되었습니다.');\n    } catch (e) {\n      window.alert('값이 입력되지 않았거나, 잘못되었습니다.');\n    }\n  }, []);\n\n  return (\n    <div className=\"container\">\n      <div className=\"header\">\n        <h1>Google SpreadSheet 페이지 만들기</h1>\n      </div>\n      <div className=\"contents\">\n        <Input\n          value={id}\n          onChange={(e) => setId(e.target.value)}\n          placeholder=\"Google SpreadSheet ID\"\n        ></Input>\n        <br />\n        <br />\n        <Input\n          value={key}\n          onChange={(e) => setKey(e.target.value)}\n          placeholder=\"API Key (Optional)\"\n        ></Input>\n        <br />키 발급:{' '}\n        <a href=\"https://console.cloud.google.com/apis/credentials\">\n          Google Cloud Platform\n        </a>\n        <br />\n        <br />\n        <Button style={{ width: '100%' }} onClick={() => handleClick(id, key)}>\n          생성\n        </Button>\n        <br />\n        <br />\n        {!!output && (\n          <>\n            <Button\n              onClick={() => {\n                copy(output);\n                window.alert('클립보드에 복사되었습니다.');\n              }}\n            >\n              복사\n            </Button>{' '}\n            <Button onClick={() => (window.location.href = output)}>\n              이동하기\n            </Button>\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n","import { useCallback, useLayoutEffect, useMemo, useState } from 'react';\nimport { GoogleSpreadsheet } from 'google-spreadsheet';\nimport { Space, Card, Tag, Divider } from 'antd';\nimport { CopyOutlined, PlayCircleOutlined } from '@ant-design/icons';\nimport copy from 'copy-to-clipboard';\n\nimport { GeneratePage } from './GeneratePage';\nimport './App.css';\n\nconst params = new URLSearchParams(window.location.search);\nconst key = params.get('key') ?? 'AIzaSyCVFJD2CdbZlE6TxlYvVWFMe3OXX03AKBE';\nconst id = params.get('id');\n\nconst colorSets = [\n  'red',\n  'gold',\n  'green',\n  'blue',\n  'purple',\n  'magenta',\n  'orange',\n  'lime',\n  'cyan',\n  'volcano',\n  'geekblue',\n];\n\nfunction App() {\n  const [title, setTitle] = useState<string>('');\n  const [headers, setHeaders] = useState<string[]>([]);\n  const [dataRows, setDataRows] = useState<Record<string, string>[]>([]);\n  const [filters, setFilters] = useState<Record<string, string>[]>([]);\n\n  const init = useCallback(async () => {\n    if (!id) {\n      return;\n    }\n\n    const docs = new GoogleSpreadsheet(id);\n    docs.useApiKey(key);\n    await docs.loadInfo();\n    document.title = docs.title;\n    setTitle(docs.title);\n\n    const sheet = docs.sheetsByIndex[0];\n    const rows = await sheet.getRows();\n\n    const headerValues = sheet.headerValues;\n    setHeaders(headerValues);\n    setDataRows(\n      rows.map((row) => {\n        const result: Record<string, string> = {};\n\n        headerValues.forEach((header) => {\n          result[header] = row[header];\n        });\n        return result;\n      })\n    );\n  }, []);\n\n  useLayoutEffect(() => {\n    init().catch((e) => {\n      window.alert('ID나 KEY에 문제가 있습니다. 다시 확인해주세요.');\n      window.location.href = `${window.location.origin}${window.location.pathname}`;\n    });\n  }, [init]);\n\n  const filteredHeaders = useMemo(() => {\n    return headers.filter(\n      (header) => header !== '' && header !== 'name' && header !== 'link'\n    );\n  }, [headers]);\n\n  const headerColors = useMemo(() => {\n    return filteredHeaders.reduce((prev, header, index) => {\n      prev[header] = colorSets[index];\n      return prev;\n    }, {} as Record<string, string>);\n  }, [filteredHeaders]);\n\n  const appendFilter = useCallback(\n    (key: string, value: string) => {\n      const isDuplicate = filters.some((filter) => {\n        const [targetKey, targetValue] = Object.entries(filter)[0];\n        return targetKey === key && targetValue === value;\n      });\n\n      if (isDuplicate) {\n        return;\n      }\n\n      setFilters([...filters, { [key]: value }]);\n    },\n    [filters]\n  );\n\n  const removeFilter = useCallback(\n    (key: string, value: string) => {\n      setFilters(\n        filters.filter((filter) => {\n          const [targetKey, targetValue] = Object.entries(filter)[0];\n          return !(targetKey === key && targetValue === value);\n        })\n      );\n    },\n    [filters]\n  );\n\n  const filteredDataRow = useMemo(() => {\n    if (!filters.length) {\n      return dataRows;\n    }\n\n    return dataRows.filter((dataRow) => {\n      return filters.every((filter) => {\n        const [filterKey, filterValue] = Object.entries(filter)[0];\n        return dataRow[filterKey] === filterValue;\n      });\n    });\n  }, [dataRows, filters]);\n\n  // const headerOptions = useMemo(() => {\n  //   return filteredHeaders.reduce((prev, header) => {\n  //     prev[header] = dataRows\n  //       .map((dataRow) => dataRow[header])\n  //       .filter((data, index, origin) => origin.indexOf(data) === index);\n  //     prev[header].push('ALL');\n  //     return prev;\n  //   }, {} as Record<string, string[]>);\n  // }, [filteredHeaders, dataRows]);\n\n  if (!id || !key) {\n    return <GeneratePage />;\n  }\n\n  return (\n    <div className=\"container\">\n      <div className=\"header\">\n        <h1>{title}</h1>\n      </div>\n      <div className=\"filters\">\n        <Space wrap>\n          {!!filters.length && <br />}\n          {filters.map((filter) => {\n            const [key, value] = Object.entries(filter)[0];\n            return (\n              <Tag\n                key={`${key}-${value}`}\n                closable\n                color={headerColors[key]}\n                onClose={() => removeFilter(key, value)}\n              >\n                {value}\n              </Tag>\n            );\n          })}\n        </Space>\n      </div>\n      <Divider></Divider>\n      <div className=\"contents\">\n        <Space align=\"center\" wrap>\n          {filteredDataRow.map((data, index) => {\n            return (\n              <Card\n                key={index}\n                title={data.name}\n                size=\"small\"\n                actions={[\n                  <PlayCircleOutlined\n                    key=\"이동\"\n                    onClick={() => {\n                      window.location.href = data.link;\n                    }}\n                  />,\n                  <CopyOutlined\n                    key=\"복사\"\n                    onClick={() => {\n                      copy(data.link);\n                      window.alert(`복사되었습니다.\\n\\n${data.link}`);\n                    }}\n                  />,\n                ]}\n              >\n                {Object.keys(data)\n                  .filter(\n                    (key) =>\n                      key !== '' &&\n                      key !== 'name' &&\n                      key !== 'link' &&\n                      data[key] !== undefined\n                  )\n                  .map((categoryKey) => {\n                    return (\n                      <p key={categoryKey}>\n                        <Tag\n                          style={{ cursor: 'pointer' }}\n                          color={headerColors[categoryKey]}\n                          onClick={() =>\n                            appendFilter(categoryKey, data[categoryKey])\n                          }\n                        >\n                          {data[categoryKey]}\n                        </Tag>\n                      </p>\n                    );\n                  })}\n              </Card>\n            );\n          })}\n        </Space>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}